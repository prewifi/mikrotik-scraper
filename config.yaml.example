# Mikrotik Router Configuration
# 
# This file contains the list of Mikrotik routers to inventory
# and their access credentials.
#
# IMPORTANT: This file contains sensitive information!
# - Do NOT commit this file to version control
# - Use appropriate file permissions (chmod 600)
# - Keep it secure and encrypted when possible

# Default credentials (used if not specified per-router)
default_credentials:
  username: "admin"
  password: "your-default-password"
  port: 8728  # RouterOS API port
  timeout: 10  # Connection timeout in seconds

# List of routers to inventory
routers:
  # Example 1: Router with default credentials
  - ip: "192.168.1.1"
    # Will use default credentials

  # Example 2: Router with custom credentials
  - ip: "192.168.1.2"
    username: "admin"
    password: "custom-password"

  # Example 3: Router with all custom settings
  - ip: "192.168.1.3"
    username: "superadmin"
    password: "super-secure-password"
    port: 8728
    timeout: 15

  # Example 4: Using hostname instead of IP
  - ip: "router-backbone-01.local"
    username: "admin"
    password: "another-password"

  # Add more routers below
  # - ip: "10.0.0.1"
  # - ip: "10.0.0.2"
  # - ip: "10.0.0.3"

# Output settings
output:
  directory: "output"  # Directory for saving inventory files
  formats:
    - "json"    # Save as JSON
    - "yaml"    # Save as YAML
    - "summary" # Save human-readable summary

# Logging settings
logging:
  level: "INFO"  # DEBUG, INFO, WARNING, ERROR, CRITICAL
  file: "mikrotik-inventory.log"
  console: true

# Collection settings
collection:
  parallel: false  # Collect data in parallel (faster but more resource intensive)
  max_workers: 5   # Maximum parallel workers (if parallel is true)
  retry_failed: false  # Retry failed connections
  retry_attempts: 2    # Number of retry attempts
  collect:
    system_info: true  # System resource information
    interfaces: true   # Network interfaces
    ip_addresses: true # IP address assignments
    neighbors: true    # LLDP/neighbor discovery
    pppoe_active: true # Active PPPoE sessions
    pppoe_secrets: true # PPPoE user credentials
    wireless: true     # Wireless interface data (if available)
    schedulers: false  # System schedulers (optional, default: false)

# Backup and SFTP settings
backup:
  enabled: true  # Enable backup functionality
  directory: "inventory/backups"  # Base directory for storing backups
  use_sftp: true  # Use SFTP for secure file transfer (recommended)
  create_backup: true  # Create RouterOS backup files (.backup)
  export_config: true  # Export configuration as RSC files (.rsc)
  keep_count: 5  # Number of recent backups to keep per router
  cleanup_old: true  # Automatically clean up old backups

# SFTP settings (for backup download)
sftp:
  enabled: true  # Enable SFTP for backup transfer
  port: 22  # SSH/SFTP port on router
  timeout: 30  # SFTP connection timeout in seconds
  # Optional: specify different credentials for SFTP if needed
  # If not specified, will use default_credentials
  # username: "api-user"
  # password: "sftp-password"



# IP Service configuration
ip_services:
  enabled: false  # Enable IP service configuration
  apply_on_connect: false  # Apply configuration automatically during inventory collection
  backup_before_apply: true  # Create backup before applying IP service changes
  rollback_on_failure: true  # Automatically rollback if configuration fails
  rollback_timeout: 300  # Timeout in seconds before automatic rollback (default: 5 minutes)
  
  # Service configurations - specify which services to configure and their allowed addresses
  services:
    # Example: API service
    # api:
    #   addresses: "10.13.252.0/27,172.16.0.0/12,192.168.0.0/16,81.31.148.214/32,194.60.213.0/24"
    
    # Example: SSH service
    # ssh:
    #   addresses: "10.13.252.0/27,172.16.0.0/12,192.168.0.0/16"
    
    # Example: Web interface
    # www:
    #   addresses: "192.168.0.0/16"
    
    # Available services: api, ssh, www, www-ssl, ftp, telnet, winbox

# User and Group Management
user_management:
  enabled: false # Enable user/group management
  groups:
    - name: "automation_group"
      policy: "ssh,ftp,read,write,policy,test,sensitive,api"
      skin: "default"
      comment: "Group for automation scripts"
  users:
    - name: "automation_user"
      group: "automation_group"
      password: "secure_password" # Optional: update password if specified
      address: "10.0.0.0/8,192.168.0.0/16" # Allowed addresses (ACL)
      comment: "Automation user"

# Syslog Configuration
syslog:
  enabled: false # Enable syslog configuration
  remote_server: "10.0.0.100" # Syslog server IP/hostname
  remote_port: 514 # Syslog port (default: 514)
  bsd_syslog: true # Use BSD syslog format
  syslog_facility: "local0" # local0-local7
  syslog_severity: "auto" # auto, debug, info, warning, error, critical
  
  # Logging topics to send to syslog
  # Each entry creates a logging rule pointing to the 'remote' action
  # 'topics' can be a single topic or comma-separated topics for concatenation
  # 'prefix' is optional and will be prepended to log messages
  # 'disabled' is optional (default: false) to disable a specific rule
  topics:
    # Basic topics (single topic)
    - topics: "info"
    - topics: "warning"
    - topics: "error"
    - topics: "critical"
    
    # Concatenated topics with prefix (for specific filtering)
    - topics: "interface,info"
      prefix: "IF-INFO"
    - topics: "interface,warning"
      prefix: "IF-WARN"
    - topics: "firewall,info"
      prefix: "FW-INFO"
    - topics: "firewall,warning"
      prefix: "FW-WARN"
    - topics: "ppp,info"
      prefix: "PPP-INFO"
    - topics: "ppp,error"
      prefix: "PPP-ERR"
    - topics: "dhcp,info"
      prefix: "DHCP"
    - topics: "wireless,info"
      prefix: "WLAN"
    - topics: "system,info"
      prefix: "SYS"
    - topics: "account"
      prefix: "AUTH"
      
    # Example of a disabled rule
    - topics: "debug"
      disabled: true

# =============================================================================
# SNMP Configuration
# =============================================================================
snmp:
  enabled: true
  # Contact information for the administrator
  contact: "admin@example.com"
  # Location will be set to the system identity if not specified
  # location: "Server Room"
  
  # Trap settings
  trap_community: "public"
  trap_version: 2  # 1, 2, or 3
  
  # SNMP Communities
  communities:
    # Basic read-only community
    - name: "public"
      addresses: "10.0.0.0/8,172.16.0.0/12,192.168.0.0/16"
      security: "none"
      read_access: true
      write_access: false
    
    # Read-write community with authentication (SNMPv3)
    - name: "private"
      addresses: "10.13.252.0/27"
      security: "authorized"
      read_access: true
      write_access: true
      authentication_protocol: "SHA1"
      authentication_password: "auth-password"
    
    # Full security with encryption (SNMPv3)
    - name: "secure"
      addresses: "10.13.252.0/27"
      security: "private"
      read_access: true
      write_access: true
      authentication_protocol: "SHA1"
      authentication_password: "auth-password"
      encryption_protocol: "AES"
      encryption_password: "enc-password"
